[Unit]
Description=LiveKit Server Container %I
After=docker.service
Requires=docker.service

[Service]
Restart=always
ExecStartPre=-/usr/bin/docker stop livekit-server
ExecStartPre=-/usr/bin/docker rm livekit-server
ExecStartPre=/usr/bin/docker pull livekit/livekit-server:%i
ExecStart=/usr/bin/docker run --rm --name livekit-server \
                              --net host \
                              -p 7880:7880 \
                              -p 7881:7881 \
                              -p 7882:7882/udp \
                              --volume /opt/livekit-server:/opt/livekit-server \
                              livekit/livekit-server:%i \
                              --config /opt/livekit-server/config.yaml

[Install]
WantedBy=multi-user.target
